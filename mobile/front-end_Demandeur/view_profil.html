<script>
    if (!localStorage.getItem("id")) 
    {
        location.replace("login.html")
    }
</script>
<!doctype html>
<html class="no-js" lang="en">
    
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
        <script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script><!--Activation API-->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>User | Profil</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		
        <!-- All Plugin Css --> 
		<link rel="stylesheet" href="css/plugins.css">
		
		<!-- Style & Common Css --> 
		<link rel="stylesheet" href="css/common.css">
        <link rel="stylesheet" href="css/main.css">
        <style>
            * {
              box-sizing: border-box;
            }
            
            /* Create two equal columns that floats next to each other */
            .column {
              float: left;
              width: 100%;
              padding: 10px;
              height: 300px; /* Should be removed. Only for demonstration */
            }
            
            /* Clear floats after the columns */
            .row:after {
              content: "";
              display: table;
              clear: both;
            }
            
            /* Responsive layout - makes the two columns stack on top of each other instead of next to each other */
            @media screen and (max-width: 600px) {
              .column {
                width: 100%;
              }
            }
            </style>
    </head>
	
    <body>
	
		<!-- Navigation Start  -->
		<nav class="navbar navbar-default navbar-sticky bootsnav">

			<div class="container">      
				<!-- Start Header Navigation -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
						<i class="fa fa-bars"></i>
					</button>
					<h3 class="navbar-brand" style="font-size: 180%;"><a style="color:#da0833;" href="index.html">Your </a>  <a style="color:#636e7b;" href="index.html"> Career</a></h3>
				</div>
				<!-- End Header Navigation -->

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="navbar-menu">
					<ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                        <li><a href="index.html"><span class="iconify" data-icon="ant-design:home-filled" data-inline="false"></span>   Accueil</a></li> 
                        <li><a href="profil.html"><span class="iconify" data-icon="simple-line-icons:user" data-inline="false"></span>   Profil</a></li>
                        <li><a href="offres_emploi.html"><span class="iconify" data-icon="fa:th-large" data-inline="false"></span>   Offres d'emploi</a></li>
                        <li><a href="favoris.html"><span class="iconify" data-icon="clarity:favorite-solid" data-inline="false"></span>   Favoris Offres</a></li>
                        <li><a href="offre.html"><span class="iconify" data-icon="fa:copy" data-inline="false"></span>   Offres Postulés</a></li>
                        <li><a href="offreia.html"><span class="iconify" data-icon="fa:copy" data-inline="false"></span>   Offres Recommandés</a></li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="iconify" data-icon="feather:settings" data-inline="false"></span>   Paramétres</a>
                            <ul class="dropdown-menu animated fadeOutUp" style="display: none; opacity: 1;">
                                <li class="active"><a href="change_psw.html"> Changer mot de passe </a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="nav-link" onclick="logout();">
                              <p class="text"><span class="iconify" data-icon="websymbol:logout" data-inline="false"></span>   Se déconnecter </p>
                            </a>
                          </li>
                    </ul>
				</div><!-- /.navbar-collapse -->
			</div>   
		</nav>
		<!-- Navigation End  --> 

		<section class="profile-detail">
			<div class="container">
				<div class="col-md-12">
                    <div class="basic-information">

					<div class="row">
                        <style>
                            .img
                            {
                                border-radius: 50%;
                                display: block;
                                margin-left: auto;
                                margin-right: auto;
                                width: 50%;
                            }
                        </style>
                        <img id="photo" alt="" class="img img-responsive"> <br>
                                        <div class="col-md-5">

                                                <div style="text-align: center;"  class="form-group ">
                                                    <h2>
                                                        <a id="nom"></a>
                                                        <a id="prenom"></a>
                                                    </h2>  
                                                </div>  
                                                <div style="text-align: center;" class="form-group ">
                                                    <h5 style="color: cadetblue;" id="niveauEducation"></h5>
                                                </div>
                                                <br>
                                                <div style="text-align: center;" class="form-group ">
                                                    <span class="iconify" data-icon="fluent:mail-24-regular" data-inline="false"></span>
                                                    <a id="email"></a>
                                                </div>
                                                <div style="text-align: center;" class="form-group ">
                                                    <span class="iconify" data-icon="clarity:phone-handset-solid" data-inline="false"></span>
                                                    <a id="numTel" ></a>
                                                </div>
                                                <div style="text-align: center;" class="form-group ">
                                                    <span class="iconify" data-icon="bytesize:location" data-inline="false"></span>
                                                    <a id="adresse"></a>
                                                </div>
                                                <div style="text-align: center;" class="form-group ">
                                                    <span class="iconify" data-icon="clarity:date-line" data-inline="false"></span>
                                                    <a id="dateNaissance" ></a>
                                                </div> <br> <hr> <br>
                                                
                                                <h5 style="text-align: center;"> Compétences</h5>
                                                <div class="form-group form-default">
                                                    <a id="listcomp"></a>
                                                </div>  <br> <hr> <br>
                                                <h5 style="text-align: center;"> Langues</h5>
                                                <div class="form-group form-default">
                                                    <a id="listlang"></a>
                                                </div> 
                                            </div> <br><br>

                                        <div class="col-md-7">

                                                <div class="panel panel-default">
                                                    <div style="text-align: center;"  class="panel-heading">
                                                        <h5><i class="fa fa-graduation-cap fa-fw"></i> Diplôme et formation:</h5>
                                                    </div>
                                                    <div class="panel-body">
                                                        <form class="form-material" onsubmit="return false">
                                                            <div class="form-group form-default">
                                                                <label > Niveau d'étude actuel :</label>
                                                                <a id="etd"></a>
                                                                <a hidden id="id_user" ></a>
                                               
                                                            </div>
                                                            <div class="form-group form-default">
                                                                <label >Diplôme ou spécialité :</label>
                                                                <a id="diplomeObtenu"></a>                                                            
                                                            </div>
                                                            <div class="form-group form-default">
                                                                <label >Etablissement :</label>
                                                                <a id="etablissement"></a>                                                            
                                                            </div>
                                                            <div class="form-group form-default">
                                                                <label >Date début :</label>
                                                                <a id="dateDeb"></a>
                                                                <label >Date Fin :</label>
                                                                <a id="dateFin"></a>
                                                            </div>
                                                            <div class="form-group form-default">
                                                                <label >Statut diplôme :</label>
                                                                <a id="statut" ></a>                                 
                                                            </div>
                                                            <div class="form-group form-default">
                                                                <label >Mention :</label>
                                                                <a id="mention"></a>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>

                                            
                                                        <div class="panel panel-default">
                                                            <div style="text-align: center;" class="panel-heading">
                                                                <h5><span class="iconify" data-icon="ps:work-case" data-inline="false"></span> Informations Professionnelles</h5>
                                                            </div>
                                                            <div class="panel-body">
                                                                <form class="form-material" onsubmit="return false">
                                                                    <div class="form-group form-default">
                                                                        <label>Nom Entreprise : </label>
                                                                        <a id="nomm" ></a>
                    
                                                                    </div>
                                                                    <div class="form-group form-default">
                                                                        <label>Titre de poste : </label>
                                                                        <a id="titreProfessionnel" ></a>
                                                                    </div>
                                                                    <div class="form-group form-default">
                                                                        <label >Missions : </label>
                                                                        <a id="mission" ></a>
                                                                    </div>
                                                                </form>
                                                            </div>


                                                            <div class="panel panel-default">
                                                                <div style="text-align: center;" class="panel-heading">
                                                                <h5><i class="fa fa-leaf fa-fw"></i>  Projets</h5>
                                                                </div>
                                                                <div class="panel-body">
                                                                    <form class="form-material">
                                                                        <div class="form-group form-default">
                                                                            <a id="listprojet"></a>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                            <div class="panel panel-default">
                                                                <div style="text-align: center;" class="panel-heading">
                                                                <h5><i class="fa fa-coffee fa-fw"></i> Centres d'intérets</h5>
                                                                </div>
                                                                <div class="panel-body">
                                                                    <form class="form-material">
                                                                        <div class="form-group form-default">
                                                                            <a id="listci"></a>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                    </div>
                                                    </div>
                                        
                                        <a hidden id="password" ></a>
                                        <a hidden id="niveauEexperience"></a>
                                        <a hidden id="travailSouhaite"></a>
                                        <a hidden id="lieutravailSouhaite"></a>
                                        <a hidden id="typeClient"></a> 
                                        <a hidden id="sexe" ></a>
                                        <a hidden id="etatCivil"></a> 
                                        <a hidden id="codePostal"></a>
                                        <a hidden id="typePermis"></a> 
                                        <a hidden id="ville"></a> 
                                        <a hidden id="id_user" ></a>
                                        <a hidden id="situationPro"></a> 
                                        <a hidden id="typePoste"></a>
                                        <a hidden id="occupation"></a>   
                                        <a hidden id="cv"></a>   

                            </div>
					</div>
                    <br>
                <div class="text-right">
                    <button type="button" class="btn btn-primary" onclick="window.print()">   <i class="fa fa-print" ></i>Imprimer CV PDF</button>
                     
                    </div>
				</div> 
			</div>
		</section>	


        <script> 
            var c = localStorage.getItem("id");
			console.log(c); 
    
            var url3 = "http://127.0.0.1:3000/users/" + c ; 
            var xhr3 = new XMLHttpRequest(); 
            xhr3.open("GET", url3, true); 
            xhr3.onload = function () { 
            var users = JSON.parse(xhr3.responseText); 
            if (xhr3.readyState == 4 && xhr3.status == "200") { 
           document.getElementById("nom").innerHTML = users.nom;
           document.getElementById("prenom").innerHTML =users.prenom;
           document.getElementById("email").innerHTML =users.email;
           document.getElementById("ville").innerHTML = users.ville;
           document.getElementById("dateNaissance").innerHTML =users.dateNaissance;
           document.getElementById("niveauEducation").innerHTML =users.niveauEducation;
           document.getElementById("niveauEexperience").innerHTML =users.niveauEexperience;
           document.getElementById("numTel").innerHTML =users.numTel;
           document.getElementById("travailSouhaite").innerHTML =users.travailSouhaite;
           document.getElementById("typeClient").innerHTML =users.typeClient;
           document.getElementById("lieutravailSouhaite").innerHTML =users.lieutravailSouhaite;
           document.getElementById("password").innerHTML = users.password;

          
        } else { 
                console.log("error"); 
            } 
                } 
                xhr3.send(null); 
            
        </script>

        <script>
            var c = localStorage.getItem("id");
            // Create a request variable and assign a new XMLHttpRequest object to it.
            var request = new XMLHttpRequest()
            // Open a new connection, using the GET request on the URL endpoint
            request.open('GET', 'http://127.0.0.1:3000/info_pers', true)
            request.onload = function()
            {
                // Begin accessing JSON data here
                var data = JSON.parse(this.response)
                console.log(data);
                var j = 1;
                data.forEach(i => {
                    console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == c)
                    {
                        document.getElementById("photo").src = i.photo;
                        document.getElementById("sexe").innerHTML = i.sexe;
                        document.getElementById("etatCivil").innerHTML = i.etatCivil;
                        document.getElementById("adresse").innerHTML = i.adresse;
                        document.getElementById("codePostal").innerHTML = i.codePostal;
                        document.getElementById("typePermis").innerHTML = i.typePermis;
                        document.getElementById("id_user").innerHTML = i.id_user;

                        localStorage.setItem("id_info_per", i._id);

                    }
                })
            }
            // Send request
            request.send()
        </script>

        <script>
            var c = localStorage.getItem("id");
            var request = new XMLHttpRequest()
            // Open a new connection, using the GET request on the URL endpoint
            request.open('GET', 'http://127.0.0.1:3000/info_pros', true)
            request.onload = function()
            {
                // Begin accessing JSON data here
                var data = JSON.parse(this.response)
                console.log(data);
                var j = 1;
                data.forEach(i => {
                    console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == c)
                    {
                        document.getElementById("nomm").innerHTML = i.nomEnt;
                        document.getElementById("titreProfessionnel").innerHTML = i.titreProfessionnel;
                        document.getElementById("typePoste").innerHTML = i.typePoste;
                        document.getElementById("occupation").innerHTML = i.occupation;
                        document.getElementById("mission").innerHTML = i.mission;
                        document.getElementById("situationPro").innerHTML = i.situationPro;
                        document.getElementById("id_user").innerHTML = i.id_user;

                        
                        localStorage.setItem("id_info_pro", i._id);

                    }
                })
            }
            // Send request
            request.send()
        </script>


<script>
    var c = localStorage.getItem("id");
    var request = new XMLHttpRequest()
    // Open a new connection, using the GET request on the URL endpoint
    request.open('GET', 'http://127.0.0.1:3000/diplomes', true)
    request.onload = function()
    {
        // Begin accessing JSON data here
        var data = JSON.parse(this.response)
        console.log(data);
        var j = 1;
        data.forEach(i => {
            console.log(i._id);
            console.log(i.id_user);
            if(i.id_user == c)
            {
                document.getElementById("cv").src = i.cv;
                document.getElementById("etd").innerHTML = i.nEtude;
                document.getElementById("diplomeObtenu").innerHTML = i.diplomeObtenu;
                document.getElementById("etablissement").innerHTML = i.etablissement;
                document.getElementById("dateDeb").innerHTML = i.dateDeb;
                document.getElementById("dateFin").innerHTML = i.dateFin;
                document.getElementById("mention").innerHTML = i.mention;
                document.getElementById("statut").innerHTML = i.statut;
                document.getElementById("id_user").innerHTML = i.id_user;


                localStorage.setItem("id_diplome", i._id);
            }
        })
    }
    // Send request
    request.send()
</script>




<script>
    var request = new XMLHttpRequest()
    request.open('GET', 'http://127.0.0.1:3000/competences', true)
    request.onload = function() {
        // Begin accessing JSON data here
        var data = JSON.parse(this.response)
        var j = 1;
        var ee = document.getElementById("listcomp");
        data.forEach(i => {
            {
                console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == localStorage.getItem("id")){
                ch = `
                <div class="profile-content">
                    <div class="row">
                        <div class="col-md-8 col-sm-8">
                            <div class="information">
                                `+i.titre+`
                        
									
                            </div>
                        </div> 
                    </div>
                </div>
                `;
                ee.insertAdjacentHTML('beforeend',ch);
                j = j+1;
            }}
        })
    }

        
    // Send request
    request.send()    
  </script>

<script>
    var request = new XMLHttpRequest()
    request.open('GET', 'http://127.0.0.1:3000/projets', true)
    request.onload = function() {
        // Begin accessing JSON data here
        var data = JSON.parse(this.response)
        var j = 1;
        var ee = document.getElementById("listprojet");
        data.forEach(i => {
            {
                console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == localStorage.getItem("id")){
                ch = `
                <div class="profile-content">
                    <div class="row">
                        <div class="col-md-8 col-sm-8">
                            <div class="information">
                                `+i.description1+`
                        
									
                            </div>
                        </div> 
                    </div>
                </div>
                `;
                ee.insertAdjacentHTML('beforeend',ch);
                j = j+1;
            }}
        })
    }

        
    // Send request
    request.send()    
  </script>

<script>
    var request = new XMLHttpRequest()
    request.open('GET', 'http://127.0.0.1:3000/langues', true)
    request.onload = function() {
        // Begin accessing JSON data here
        var data = JSON.parse(this.response)
        var j = 1;
        var ee = document.getElementById("listlang");
        data.forEach(i => {
            {
                console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == localStorage.getItem("id")){
                ch = `
                <div class="profile-content">
                    <div class="row">
                        <div class="col-md-8 col-sm-8">
                            <div class="information">
                            `+i.nom1+`
                        
									
                            </div>
                        </div> 
                    </div>
                </div>
                `;
                ee.insertAdjacentHTML('beforeend',ch);
                j = j+1;
            }}
        })
    }

        
    // Send request
    request.send()    
  </script>

<script>
    var request = new XMLHttpRequest()
    request.open('GET', 'http://127.0.0.1:3000/centres_interets', true)
    request.onload = function() {
        // Begin accessing JSON data here
        var data = JSON.parse(this.response)
        var j = 1;
        var ee = document.getElementById("listci");
        data.forEach(i => {
            {
                console.log(i._id);
                    console.log(i.id_user);
                    if(i.id_user == localStorage.getItem("id")){
                ch = `
                <div class="profile-content">
                    <div class="row">
                        <div class="col-md-8 col-sm-8">
                            <div class="information">
                                `+i.descri+` <br>
                                 `+i.pointsForts+`
                       
                        
									
                            </div>
                        </div> 
                    </div>
                </div>
                `;
                ee.insertAdjacentHTML('beforeend',ch);
                j = j+1;
            }}
        })
    }

        
    // Send request
    request.send()    
  </script>
  



    
		<script>
			function logout()
			 {
				 var c = window.confirm("Voulez-vous vraiment vous déconnecter ?")
				 if(c== true)
				 {
					 localStorage.clear();
					 location.replace("login.html");
				 }
		
			}
		</script>

		
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/owl.carousel.min.js"></script>
		<script src="js/bootsnav.js"></script>
		<script src="js/main.js"></script>
        <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
        
    </body>

</html>
